{% extends 'initial.html' %}
{% load prediction_tags %}

{% block body %}

<h1>Upload Image</h1>
<form action="{% url 'predict' %}" method="post" enctype="multipart/form-data">{% csrf_token %}

    <p>{{ form.non_field_errors }}</p>
    <p>{{ form.image.label_tag }} {{ form.image.help_text }}</p>
    <p>
        {{ form.image.errors }}
        {{ form.image }}
    </p>
    <p><input type="submit" value="Upload"/></p>
</form>


{% if uploaded_image %}
<h3>Uploaded Image:</h3>
<img class="uploaded-image" src="{{uploaded_image|image_as_base64}}">
{% endif %}

{% if predictions %}
<h4>What is this?</h4>

<ul>
{% for p in predictions %}
    <li>{{p.0}} <span>{{p.1}}%</span></li>
{% endfor %}
</ul>
{% endif %}


{% endblock %}
